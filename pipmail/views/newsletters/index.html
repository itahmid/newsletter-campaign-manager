{% extends "base.html" %}
{% block content %}
{% from '_macros.html' import pagination with context %}
<div class="row-fluid">
   <div class="span6">
      <legend>Newsletter Queue</legend>
      <div class="alert alert-info" style="font-size:15px;">No newsletters are set to go out</div>

   </div>

   <div class="span6">

      <legend>Quick Search</legend>
      FIX LATER
   </div>
</div>
<div class="row-fluid" >
   <div class="span20" >
      <h1 class="pull-left">Latest Campaigns</h1>
      <br/>
 <br>
  
    <br>

    <div class="btn-group pull-left">
      <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
        Actions
        <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
          <li>
          <a href="" > <i class="icon-edit"></i>
            Edit
          </a> </li>
          <li>
          <a href="" > <i class="icon-remove"></i>
            Delete
          </a> </li>
      </ul>
    </div>

      <table class="table table-striped table-condensed">
         <thead>

            <tr>
               <th class="span1">
                  <input type="checkbox" class="checkall"/>
               </th>
               <th class="span2">Code</th>
               <th class="span4">Subject</th>
               <th class="span3">Date Added</th>
               <th class="span3">Date Sent</th>
               <th class="span1">Recipients</th>
               <th class="span2">Company</th>
             
            </tr>
         </thead>
         {% for nl in newsletters %}
         <tr>
            <td style="border-top:0;">
               <input type="checkbox" id="{{nl['nid']}}"/>
            </td>

            <td style="border-top:0;">{{nl['code']}}</td>
            <td style="border-top:0;">{{nl['subject']}}</td>
            <td style="border-top:0;">{{nl['date_added']}}</td>
            <td style="border-top:0;">{{nl['date_sent'] if nl['date_sent'] else 'Not Sent'}}</td>
            <td style="border-top:0;">0</td>
            <td style="border-top:0;">{{nl['company']}}</td>
         
         </tr>
         {% endfor %}
      </table>
      {{ pagination('newsletters', page) }}
   </div>
</div>

<script>
$(document).ready(function() {
   $('th input:checkbox').click(function(e) {
      var table = $(e.target).closest('table');
      $('td input:checkbox', table).attr('checked', e.target.checked);
   });
});
</script>
{% endblock %}
