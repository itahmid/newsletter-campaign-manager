{% extends "base.html" %}
{% block content %}
{% from '_macros.html' import render_table with context %}
{% from '_macros.html' import pagination with context %}
<div class="row-fluid">
   <div class="span6">
      <table class="table table-striped table-bordered table-condensed">
         <h3>Newsletter Queue</h3>

         <tbody>
            <tr>
               <td colspan="2">
                  <div class="box box-info">No newsletters are set to go out</div>
               </td>
            </tr>
         </tbody>
      </table>
   </div>
   <div class="span6">

      <h3>Quick Search</h3>

      <form method="get" action="/" class="form-inline" >
         <input name="pipcode" class="span5" type="text" placeholder="PIPCode: e.g. PIP1234" >
         <br>
         <br>
         <input name="pipcode" class="span5" type="text" placeholder="Subject: e.g. Keywords" >
         <br>
         <br>
         <input name="loc" class="span5" type="text" placeholder="Date Range: 01-01-01-03-03-13">
         <br>
         <br>
         <input name="loc" class="span5" type="text" placeholder="Location: City, State, Zip">
         <br>
         <br>
         <input name="loc" class="span5" type="text" placeholder="Location: City, State, Zip">
         <br>
         <br>
         <input name="loc" class="span5" type="text" placeholder="Location: City, State, Zip">
         <br>
         <br>
         <button type="submit" class="btn btn-primary"> <i class="icon-search icon-white"></i>
         </button>
      </form>
   </div>
</div>

<div class="row-fluid">
   <div class="span20">
      <h1 class="pull-left">Latest Campaigns</h1>
      <br>
      <a href="{{ url_for('newsletters.create') }}" class="btn btn-success pull-right">Create New Campaign</a>

      <table class="table table-striped table-bordered table-condensed">
         <thead>
            <tr>
               <th class="span2">Code</th>
               <th class="span5">Subject</th>
               <th class="span4">Date Added</th>
               <th class="span4">Date Sent</th>
               <th class="span1">Recipients</th>
               <th class="span2">Company</th>
               <th class="span2">Actions</th>
            </tr>
         </thead>
         {% for nl in newsletters %}
         <tr>
            <td>{{nl['code']}}</td>
            <td>{{nl['subject']}}</td>
            <td>{{nl['date_added']}}</td>
            <td>{{nl['date_sent']}}</td>
            <td>0</td>
            <td>{{nl['company']}}</td>
            <td style="table-layout:fixed;overflow:hidden;text-align:center;width:20%;">
               <a href="" class="btn btn-mini"> <i class="icon-remove"></i>
                  Stats
               </a>
               <a href="{{ url_for('newsletters.edit', nid=nl['newsletter_id'])}}" class="btn btn-mini">
                  <i class="icon-edit"></i>
                  Edit
               </a>
               <a href="{{ url_for('newsletters.edit', nid=nl['newsletter_id'])}}" class="btn btn-mini">
                  <i class="icon-remove"></i>
                  Delete
               </a>
            </td>
         </tr>
         {% endfor %}
      </table>
      {{ pagination('newsletters', page) }}
   </div>
</div>
{% endblock %}